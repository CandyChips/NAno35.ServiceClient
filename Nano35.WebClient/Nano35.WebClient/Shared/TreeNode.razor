@using Nano35.WebClient.Services
@using Nano35.Contexts.Http.storage
@inject HttpGet GetRequest
@inject RequestManager RequestManager
@inject ISessionProvider SessionProvider

@if (_childs.Count != 0)
{
    <RadzenTreeItem Text="@Item.Name" Change=@OnChange.InvokeAsync(Item)>
        @foreach (var item in _childs)
        {
            <TreeNode Item="@item"/>
        }
    </RadzenTreeItem>
}
else
{
    <RadzenTreeItem Text="@Item.Name" />
}

@code
{
    [Parameter] public CategoryViewModel Item { get; set; }
    [Parameter] public EventCallback OnChange { get; set; } 
    private List<CategoryViewModel> _childs = new();

    protected override async Task OnInitializedAsync()
    {
        if (Item.Categories != null) 
        {
            Console.WriteLine(Item.Name);
            _childs = Item.Categories;
        }
    }
}
