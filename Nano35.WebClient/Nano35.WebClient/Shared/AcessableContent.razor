@using Nano35.WebClient.Services
@inject IAuthService AuthService

<LoadingContent IsLoaded="_isLoaded">
    <LoadedContent>
        @if (!AllowedRoles.Except(UserRoles).Any())
        {
            @AllowedContent   
        }
    </LoadedContent>
</LoadingContent>

@code {
    [Parameter] public RenderFragment AllowedContent { get; set; }
    [Parameter] public List<Guid> AllowedRoles { get; set; }
    private List<Guid> UserRoles { get; set; }
    private bool _isLoaded;

    protected override async Task OnInitializedAsync()
    {
        _isLoaded = false;
        UserRoles = (await AuthService.GetCurrentRoles()).Roles;
        _isLoaded = true;
    }
}